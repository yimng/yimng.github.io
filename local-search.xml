<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>Hello World</title>
    <link href="/2020/05/27/hello-world/"/>
    <url>/2020/05/27/hello-world/</url>
    
    <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="noopener">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="noopener">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="noopener">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><pre><code class="hljs bash">$ hexo new <span class="hljs-string">"My New Post"</span></code></pre><p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="noopener">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><pre><code class="hljs bash">$ hexo server</code></pre><p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="noopener">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><pre><code class="hljs bash">$ hexo generate</code></pre><p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="noopener">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><pre><code class="hljs bash">$ hexo deploy</code></pre><p>More info: <a href="https://hexo.io/docs/one-command-deployment.html" target="_blank" rel="noopener">Deployment</a></p>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>nexus</title>
    <link href="/2020/05/27/nexus/"/>
    <url>/2020/05/27/nexus/</url>
    
    <content type="html"><![CDATA[<h2 id="利用nexus3创建docker-registry"><a href="#利用nexus3创建docker-registry" class="headerlink" title="利用nexus3创建docker registry"></a>利用nexus3创建docker registry</h2><h3 id="1-用nexus3提供的镜像来启动个nexus3的容器"><a href="#1-用nexus3提供的镜像来启动个nexus3的容器" class="headerlink" title="1. 用nexus3提供的镜像来启动个nexus3的容器"></a>1. 用nexus3提供的镜像来启动个nexus3的容器</h3><ol><li><p>先创建个nexus使用的卷：<br><code>docker volume create --name nexus-data</code></p></li><li><p>然后启动nexus容器，注意要加下8443，8444，8445端口，以后docker 拉推镜像会用到8444，8445端口，8443是https用的</p><pre><code class="hljs plain">docker run -d -p 8081:8081 -p 8443:8443 -p 8444:8444 -p 8445:8445 -v &#x2F;etc&#x2F;localtime:&#x2F;etc&#x2F;localtime -v nexus-data:nexus:data  --name nexus sonatype&#x2F;nexus3</code></pre></li></ol><ol start="3"><li>然后等待nexus容器起来，会有一会的延迟，然后访问http:ip:8081,点击登录，会弹出登录的按钮，默认密码在容器内，可用下面命令找到：<br>先进入容器<br><code>docker exec -it container-id /bin/bash</code><br>然后<br><code>cat /nexus-data/admin-password</code>，把密码拷贝出来去登录，第一次会让你设置个自己的密码。</li></ol><h3 id="2-配置nexus3-使用-https"><a href="#2-配置nexus3-使用-https" class="headerlink" title="2. 配置nexus3 使用 https"></a>2. 配置nexus3 使用 https</h3><p>参见<a href="https://support.sonatype.com/hc/en-us/articles/217542177" target="_blank" rel="noopener">https://support.sonatype.com/hc/en-us/articles/217542177</a>这篇文章<br>具体步骤：</p><ol><li><p>登录到nexus容器内：<br><code>docker exec -it nexus-container-id /bin/bash</code></p></li><li><p>在$data-dir/etc/ssl/keystore.jks创建java keystore 文件, $data-dir/为/nexus-data目录，其中，把${NEXUS_DOMAIN} 替换成nexus的域名，${NEXUS_IP_ADDRESS}替换成nexus的ip</p><pre><code class="hljs plain">keytool -genkeypair -keystore keystore.jks -storepass password -keypass password -alias jetty -keyalg RSA -keysize 2048 -validity 5000 -dname &quot;CN&#x3D;*.$&#123;NEXUS_DOMAIN&#125;, OU&#x3D;Example, O&#x3D;Sonatype, L&#x3D;Unspecified, ST&#x3D;Unspecified, C&#x3D;US&quot; -ext &quot;SAN&#x3D;DNS:$&#123;NEXUS_DOMAIN&#125;,IP:$&#123;NEXUS_IP_ADDRESS&#125;&quot; -ext &quot;BC&#x3D;ca:true&quot;</code></pre></li></ol><ol start="3"><li><p>编辑$data-dir/etc/nexus.properties文件，增加一行<br><code>application-port-ssl=8443</code><br>8443是https用的端口，可以改为其它端口。<br>把包含nexus-args的一行开头注释去掉，然后在逗号分隔的那些值里加入${jetty.etc}/jetty-https.xml<br>修改后的那一行应该是这个样子：</p><pre><code class="hljs plain">nexus-args&#x3D;$&#123;jetty.etc&#125;&#x2F;jetty.xml,$&#123;jetty.etc&#125;&#x2F;jetty-http.xml,$&#123;jetty.etc&#125;&#x2F;jetty-https.xml,$&#123;jetty.etc&#125;&#x2F;jetty-requestlog.xml</code></pre></li></ol><ol start="4"><li><p>(可选)如果你不想用http connector，可以把${jetty.etc}/jetty-http.xml去掉</p></li><li><p>增加一行:<br><code>ssl.etc=${karaf.data}/etc/ssl</code></p></li><li><p>编辑 $install-dir/etc/jetty/jetty-https.xml<br>正确设置 keystore 的密码，如果你用password作为密码，这一步就不是必须的了<br>(建议)<br>在包含&lt;Set name=KeyStorePath”&gt;的这一行前面加上下面一行，例如如果你的PrivateKeyEntry 叫jetty, 增加下面一行：<br><code>&lt;Set name=&quot;certAlias&quot;&gt;jetty&lt;/Set&gt;</code></p></li><li><p>重启nexus容器</p></li></ol><h3 id="3-配置docker-repository"><a href="#3-配置docker-repository" class="headerlink" title="3. 配置docker repository"></a>3. 配置docker repository</h3><p>配置docker repository，添加proxy, hosted, group 类型的docker repository, 其中 hosted,和group类型的用https, 端口用8445，8444</p><h3 id="4-在docker-客户端配置nexus使用的自签名的ca"><a href="#4-在docker-客户端配置nexus使用的自签名的ca" class="headerlink" title="4. 在docker 客户端配置nexus使用的自签名的ca"></a>4. 在docker 客户端配置nexus使用的自签名的ca</h3><p>如果是centos:</p><pre><code class="hljs plain">openssl s_client -showcerts -connect nexus-ip:8443 &lt;&#x2F;dev&#x2F;null 2&gt;&#x2F;dev&#x2F;null | openssl x509 -outform PEM &gt; &#x2F;etc&#x2F;pki&#x2F;ca-trust&#x2F;source&#x2F;anchors&#x2F;nexus-ip.crtupdate-ca-trust</code></pre><p>如果是在ubuntu:</p><pre><code class="hljs plain">openssl s_client -showcerts -connect nexus-ip:8443 &lt;&#x2F;dev&#x2F;null 2&gt;&#x2F;dev&#x2F;null | openssl x509 -outform PEM &gt; &#x2F;usr&#x2F;local&#x2F;share&#x2F;ca-certificates&#x2F;nexus-ip.crtupdate-ca-certificates</code></pre><h3 id="5-docker-login-nexus-ip-8445"><a href="#5-docker-login-nexus-ip-8445" class="headerlink" title="5. docker login nexus-ip:8445"></a>5. docker login nexus-ip:8445</h3><p>用户名密码为登录nexus的admin和相应的密码<br>如果push 或者pull的时候，出现no basic auth的错误，修改~/.docker/config里相应的端口号</p>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>怎样用nexus搭建私有的maven存储库</title>
    <link href="/2020/05/27/%E6%80%8E%E6%A0%B7%E7%94%A8nexus%E6%90%AD%E5%BB%BA%E7%A7%81%E6%9C%89%E7%9A%84maven%E5%AD%98%E5%82%A8%E5%BA%93/"/>
    <url>/2020/05/27/%E6%80%8E%E6%A0%B7%E7%94%A8nexus%E6%90%AD%E5%BB%BA%E7%A7%81%E6%9C%89%E7%9A%84maven%E5%AD%98%E5%82%A8%E5%BA%93/</url>
    
    <content type="html"><![CDATA[<h2 id="怎样用nexus搭建私有的maven存储库"><a href="#怎样用nexus搭建私有的maven存储库" class="headerlink" title="怎样用nexus搭建私有的maven存储库"></a>怎样用nexus搭建私有的maven存储库</h2><ol><li><p>用nexus docker 镜像来启动nexus, nexus的镜像使用，可以参考<a href="https://hub.docker.com/r/sonatype/nexus3" target="_blank" rel="noopener">docker hub</a> 上的介绍。</p></li><li><p>先创建个卷：<code>docker volume create --name nexus-data</code></p></li><li><p>然后启动nexus的容器：<code>docker run -d -p 8081:8081 --name nexus -v nexus-data:nexus:data sonatype/nexus3</code>。如果下载nexus比较慢的话，可以用国内的镜像源，修改/etc/docker/daemon.json,<br><code>{&quot;registry-mirrors&quot;: [ &quot;加速地址&quot; ], &quot;insecure-registries&quot;: [] }{ &quot;registry-mirrors&quot;: [ &quot;加速地址&quot; ], &quot;insecure-registries&quot;: [] }</code></p></li><li><p>然后等待nexus 容器起来，会有一会的延迟，然后访问http:nexus-host-ip:8081,点击登录，会弹出登录的按钮，默认密码在容器内，可用下面命令找到：</p><p>先进入容器<code>docker exec -it container-id /bin/bash</code><br>然后<code>cat /nexus-data/admin-password</code>，把密码拷贝出来去登录，第一次会让你设置个自己的密码。</p></li><li><p>nexus现在已经默认创建好了maven-central, maven-release, maven-snapshot, maven-public repo, 其中public是个group的类型，已经包括了maven-{central,release,snapshot},我们配置settings.xml的时候用这个就好。</p></li><li><p>settings.xml的设置</p><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">settings</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">"http://maven.apache.org/SETTINGS/1.0.0"</span> <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">"http://www.w3.org/2001/XMLSchema-instance"</span> <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">"http://maven.apache.org/SETTINGS/1.0.0</span></span><span class="hljs-tag"><span class="hljs-string">http://maven.apache.org/xsd/settings-1.0.0.xsd"</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">localRepository</span>/&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">interactiveMode</span>/&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">usePluginRegistry</span>/&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">offline</span>/&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">pluginGroups</span>/&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">servers</span>&gt;</span>        <span class="hljs-tag">&lt;<span class="hljs-name">server</span>&gt;</span>            <span class="hljs-tag">&lt;<span class="hljs-name">id</span>&gt;</span>nexus-snapshots<span class="hljs-tag">&lt;/<span class="hljs-name">id</span>&gt;</span>            <span class="hljs-tag">&lt;<span class="hljs-name">username</span>&gt;</span>admin<span class="hljs-tag">&lt;/<span class="hljs-name">username</span>&gt;</span>            <span class="hljs-tag">&lt;<span class="hljs-name">password</span>&gt;</span>XXXXXXXX<span class="hljs-tag">&lt;/<span class="hljs-name">password</span>&gt;</span>        <span class="hljs-tag">&lt;/<span class="hljs-name">server</span>&gt;</span>        <span class="hljs-tag">&lt;<span class="hljs-name">server</span>&gt;</span>            <span class="hljs-tag">&lt;<span class="hljs-name">id</span>&gt;</span>nexus-releases<span class="hljs-tag">&lt;/<span class="hljs-name">id</span>&gt;</span>            <span class="hljs-tag">&lt;<span class="hljs-name">username</span>&gt;</span>admin<span class="hljs-tag">&lt;/<span class="hljs-name">username</span>&gt;</span>            <span class="hljs-tag">&lt;<span class="hljs-name">password</span>&gt;</span>XXXXXXXX<span class="hljs-tag">&lt;/<span class="hljs-name">password</span>&gt;</span>        <span class="hljs-tag">&lt;/<span class="hljs-name">server</span>&gt;</span>    <span class="hljs-tag">&lt;/<span class="hljs-name">servers</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">mirrors</span>&gt;</span>        <span class="hljs-tag">&lt;<span class="hljs-name">mirror</span>&gt;</span>            <span class="hljs-tag">&lt;<span class="hljs-name">id</span>&gt;</span>central<span class="hljs-tag">&lt;/<span class="hljs-name">id</span>&gt;</span>            <span class="hljs-tag">&lt;<span class="hljs-name">mirrorOf</span>&gt;</span>*<span class="hljs-tag">&lt;/<span class="hljs-name">mirrorOf</span>&gt;</span>            <span class="hljs-tag">&lt;<span class="hljs-name">name</span>&gt;</span>central<span class="hljs-tag">&lt;/<span class="hljs-name">name</span>&gt;</span>            <span class="hljs-tag">&lt;<span class="hljs-name">url</span>&gt;</span>http://nexus-host-ip:8081/repository/maven-public/<span class="hljs-tag">&lt;/<span class="hljs-name">url</span>&gt;</span>        <span class="hljs-tag">&lt;/<span class="hljs-name">mirror</span>&gt;</span>    <span class="hljs-tag">&lt;/<span class="hljs-name">mirrors</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">proxies</span>/&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">profiles</span>/&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">activeProfiles</span>/&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">settings</span>&gt;</span></code></pre></li><li><p>然后是设置pom, 如果只是相从nexus下载jar,只用添加下面的:</p><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">repositories</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">repository</span>&gt;</span>        <span class="hljs-tag">&lt;<span class="hljs-name">id</span>&gt;</span>maven-group<span class="hljs-tag">&lt;/<span class="hljs-name">id</span>&gt;</span>        <span class="hljs-tag">&lt;<span class="hljs-name">url</span>&gt;</span>http://nexus-host-ip:8081/repository/maven-public/<span class="hljs-tag">&lt;/<span class="hljs-name">url</span>&gt;</span>    <span class="hljs-tag">&lt;/<span class="hljs-name">repository</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">repositories</span>&gt;</span></code></pre></li><li><p>如果想向nexus私服发布jar,需要添加下面的：</p><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">distributionManagement</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">snapshotRepository</span>&gt;</span>        <span class="hljs-tag">&lt;<span class="hljs-name">id</span>&gt;</span>nexus-snapshots<span class="hljs-tag">&lt;/<span class="hljs-name">id</span>&gt;</span>        <span class="hljs-tag">&lt;<span class="hljs-name">url</span>&gt;</span>http://nexus-host-ip:8081/repository/maven-snapshots/<span class="hljs-tag">&lt;/<span class="hljs-name">url</span>&gt;</span>    <span class="hljs-tag">&lt;/<span class="hljs-name">snapshotRepository</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">repository</span>&gt;</span>        <span class="hljs-tag">&lt;<span class="hljs-name">id</span>&gt;</span>nexus-releases<span class="hljs-tag">&lt;/<span class="hljs-name">id</span>&gt;</span>        <span class="hljs-tag">&lt;<span class="hljs-name">url</span>&gt;</span>http://nexus-host-ip:8081/repository/maven-releases/<span class="hljs-tag">&lt;/<span class="hljs-name">url</span>&gt;</span>    <span class="hljs-tag">&lt;/<span class="hljs-name">repository</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">distributionManagement</span>&gt;</span></code></pre></li></ol>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>test</title>
    <link href="/2020/05/16/test/"/>
    <url>/2020/05/16/test/</url>
    
    <content type="html"><![CDATA[<h2 id="这是我的第一篇博客"><a href="#这是我的第一篇博客" class="headerlink" title="这是我的第一篇博客"></a>这是我的第一篇博客</h2><blockquote><p>引用能用吗？</p></blockquote><pre><code class="hljs python"><span class="hljs-comment"># 我是 python 代码</span>a = <span class="hljs-number">1</span>print(a)</code></pre>]]></content>
    
    
    
  </entry>
  
  
  
  
</search>
